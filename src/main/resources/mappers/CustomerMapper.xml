<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	<mapper namespace="CustomerMapper">
	<cache />
	<sql id="customerservice">
	BOARD_NUM,MEMBER_ID,CHARGE_NUM,BOARD_CONTENT,BOARD_DATE,BOARD_ANSWER,BOARD_KIND,BOARD_TITLE
	</sql>
	
	<insert id="cinsert" parameterType="CustomerserviceDTO">
		insert into COUNTER (BOARD_NUM,MEMBER_ID,CHARGE_NUM,BOARD_CONTENT,BOARD_DATE,BOARD_ANSWER,BOARD_KIND,BOARD_TITLE)
		values((select nvl(max(BOARD_NUM),0) +1 from COUNTER),#{MemberId},1,#{BoardContent},sysdate,1,#{BoardKind},#{BoardTitle})
	</insert>
	
	<resultMap type="CustomerserviceDTO" id="listrs">
		<id column="BOARD_NUM" jdbcType="BIGINT" property="BoardNum"/>
		<result column="MEMBER_ID" jdbcType="VARCHAR" property="MemberId"/>
		<result column="CHARGE_NUM" jdbcType="BIGINT" property="ChargeNum"/>
		<result column="BOARD_CONTENT" jdbcType="NVARCHAR" property="BoardContent"/>
		<result column="BOARD_DATE" jdbcType="TIMESTAMP" property="BoardDate"/>
		<result column="BOARD_ANSWER" jdbcType="BIGINT" property="BoardAnswer"/>
		<result column="BOARD_KIND" jdbcType="NVARCHAR" property="BoardKind"/>
		<result column="BOARD_TITLE" jdbcType="NVARCHAR" property="BoardTitle"/>
	</resultMap>
	<select id="alllist" parameterType="CustomerserviceDTO" resultMap="listrs">
		select
			<include refid="customerservice" />
			from counter
			WHERE BOARD_KIND != '공지사항'
	</select>
	
	<select id="detail" resultMap="listrs" parameterType="int">
	select
		<include refid="customerservice" />
		from COUNTER
		where BOARD_NUM = #{num}
	</select>
	
	<!-- 공지만 빼오기 -->
	<select id="noticelist" parameterType="CustomerserviceDTO" resultMap="listrs">
	select
			<include refid="customerservice" />
			from counter
			where BOARD_KIND = '공지사항'
	</select>
	
	
	
	
	
	
	</mapper> 